<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Supply Chain CV-7</title>

<link rel="icon" href="logo.png">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=JetBrains+Mono&display=swap" rel="stylesheet">

<style>

/* =====================================================
ROOT VARIABLES
===================================================== */

:root{

--bg:#000;
--panel:#050505;
--accent:#00ff41;
--accentSoft:#00ff4122;
--danger:#ff0033;
--text:#00ff41;

--fontDisplay:'Orbitron',sans-serif;
--fontMono:'JetBrains Mono',monospace;

--speed:0.3s;

}

/* =====================================================
BASE
===================================================== */

*{
box-sizing:border-box;
margin:0;
padding:0;
scroll-behavior:smooth;
}

body{

background:var(--bg);
color:var(--text);
font-family:var(--fontMono);

}

/* =====================================================
HEADER
===================================================== */

header{

position:sticky;
top:0;
z-index:999;

background:#000;
border-bottom:1px solid var(--accent);

padding:20px;

text-align:center;

}

header h1{

font-family:var(--fontDisplay);
letter-spacing:6px;

}

header a{

text-decoration:none;
color:var(--accent);

}

/* =====================================================
RIGHT NAVIGATION
===================================================== */

.quickNav{

position:fixed;
right:10px;
top:50%;
transform:translateY(-50%);
z-index:999;

display:flex;
flex-direction:column;
gap:10px;

}

.quickNav button{

background:#000;
border:1px solid var(--accent);
color:var(--accent);

padding:10px;
cursor:pointer;

}

.quickNav button:hover{

background:var(--accent);
color:#000;

}

/* =====================================================
SECTIONS
===================================================== */

main{

max-width:1400px;
margin:auto;
padding:20px;

}

.section{

border:1px solid var(--accentSoft);

background:var(--panel);

padding:20px;
margin-bottom:40px;

position:relative;

}

.section::before{

content:"SUPPLY CHAIN MODULE";
position:absolute;
top:-10px;
left:10px;
font-size:10px;
background:#000;
padding:2px 6px;
color:var(--accent);

}

.section h2{

font-family:var(--fontDisplay);
margin-bottom:20px;

}

/* =====================================================
DUAL PANEL WORKSPACE
===================================================== */

.workspace{

display:grid;
grid-template-columns:1fr 1fr;
gap:15px;

}

/* =====================================================
INPUT
===================================================== */

input,textarea{

width:100%;
background:#000;
border:1px solid var(--accentSoft);
color:var(--accent);
padding:10px;

}

textarea{

min-height:120px;

}

/* =====================================================
BUTTONS
===================================================== */

button{

background:#000;
border:1px solid var(--accent);
color:var(--accent);
padding:10px;
cursor:pointer;

transition:var(--speed);

}

button:hover{

background:var(--accent);
color:#000;

}

.send{

background:var(--accent);
color:#000;

}

/* =====================================================
OUTPUT
===================================================== */

.output{

border:1px solid var(--accentSoft);
padding:10px;
margin-top:10px;
min-height:40px;

}

/* =====================================================
MESSAGE BOARD
===================================================== */

.msg{

border:1px solid var(--accentSoft);
padding:10px;
margin-bottom:10px;

}

/* =====================================================
LOADING
===================================================== */

.loading{

position:fixed;
width:100%;
height:100%;
background:#000;
display:flex;
align-items:center;
justify-content:center;
z-index:9999;

opacity:1;
transition:1s;

}

.loading.hide{

opacity:0;
pointer-events:none;

}

.loader{

border:3px solid #111;
border-top:3px solid var(--accent);
width:60px;
height:60px;
border-radius:50%;

animation:spin 1s linear infinite;

}

@keyframes spin{

100%{transform:rotate(360deg)}

}

/* =====================================================
FOOTER
===================================================== */

footer{

text-align:center;
padding:40px;
border-top:1px solid var(--accent);

font-family:var(--fontDisplay);

animation:pulse 4s infinite;

}

@keyframes pulse{

0%,100%{opacity:1}
50%{opacity:0.5}

}

</style>

</head>

<body>


<div class="loading" id="loading">
<div class="loader"></div>
</div>


<header>

<h1>

<a href="/index.html">

SUPPLY CHAIN CV-7

</a>

</h1>

</header>


<div class="quickNav">

<button onclick="scrollToTop()">TOP</button>

<button onclick="scrollToMiddle()">MID</button>

<button onclick="scrollToBottom()">BOT</button>

</div>


<main id="mainContent">


<!-- TARGET -->

<div class="section">

<h2>TARGET OPERATIONS</h2>

<div class="workspace">

<div>

<textarea id="s1_input"></textarea>

<button onclick="save(1)">SAVE</button>

<button class="send" onclick="send(1)">SEND</button>

</div>

<div id="s1_output" class="output"></div>

</div>

</div>


<!-- TEAM BOARD -->

<div class="section">

<h2>TEAM MESSAGE BOARD</h2>

<input id="codename" placeholder="Operator Codename">

<textarea id="message"></textarea>

<button class="send" onclick="postMessage()">SEND</button>

<div id="board"></div>

</div>


<footer>

"The Lord is my light and my salvation; whom shall I fear?" â€” Psalm 27:1 KJV

</footer>


</main>


<script type="module">


import { initializeApp }

from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";

import {

getFirestore,
doc,
setDoc,
getDoc,
collection,
addDoc,
onSnapshot,
deleteDoc,
updateDoc,
serverTimestamp

}

from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";



const firebaseConfig = {

apiKey:"AIzaSyD-hhoLpddOoMq1tUlA4SqnwncFnVpaHIQ",
authDomain:"eden-4a8d3.firebaseapp.com",
projectId:"eden-4a8d3",
storageBucket:"eden-4a8d3.firebasestorage.app",
messagingSenderId:"421147129483",
appId:"1:421147129483:web:9495dfb813fe6195f2c68e"

};



const app = initializeApp(firebaseConfig);

const db = getFirestore(app);


/* =====================================================
LOADING ENGINE
===================================================== */

window.addEventListener("load",()=>{

setTimeout(()=>{

loading.classList.add("hide");

},800);

});


/* =====================================================
LOCAL STORAGE
===================================================== */

const LOCAL="SUPPLYCHAIN";

function saveLocal(id,value){

let data=JSON.parse(localStorage.getItem(LOCAL)||"{}");

data[id]=value;

localStorage.setItem(LOCAL,JSON.stringify(data));

}


function loadLocal(id){

let data=JSON.parse(localStorage.getItem(LOCAL)||"{}");

return data[id]||"";

}



/* =====================================================
SAVE
===================================================== */

window.save=async function(id){

let value=document.getElementById("s"+id+"_input").value;

saveLocal(id,value);

};



/* =====================================================
SEND CLOUD
===================================================== */

window.send=async function(id){

let value=document.getElementById("s"+id+"_input").value;

await setDoc(doc(db,"supplychain_sections","s"+id),{

content:value,
time:serverTimestamp()

});

};



/* =====================================================
LOAD
===================================================== */

async function load(){

let snap=await getDoc(doc(db,"supplychain_sections","s1"));

if(snap.exists()){

s1_input.value=snap.data().content;

}

else{

s1_input.value=loadLocal(1);

}

}

load();



/* =====================================================
TEAM MESSAGE BOARD
===================================================== */

const boardCol=collection(db,"supplychain_board");


window.postMessage=async function(){

await addDoc(boardCol,{

name:codename.value,
text:message.value,
time:serverTimestamp()

});

};



onSnapshot(boardCol,(snap)=>{

board.innerHTML="";

snap.forEach(docu=>{

let data=docu.data();

let div=document.createElement("div");

div.className="msg";

div.innerHTML=`

<b>${data.name}</b>

<p>${data.text}</p>

<button onclick="deleteMsg('${docu.id}')">Delete</button>

<button onclick="editMsg('${docu.id}','${data.text}')">Edit</button>

`;

board.appendChild(div);

});

});


window.deleteMsg=async function(id){

await deleteDoc(doc(db,"supplychain_board",id));

};


window.editMsg=async function(id,old){

let text=prompt("Edit Message",old);

if(!text)return;

await updateDoc(doc(db,"supplychain_board",id),{

text:text

});

};



/* =====================================================
NAVIGATION
===================================================== */

window.scrollToTop=()=>window.scrollTo(0,0);

window.scrollToMiddle=()=>window.scrollTo(0,document.body.scrollHeight/2);

window.scrollToBottom=()=>window.scrollTo(0,document.body.scrollHeight);



</script>


</body>
</html>
