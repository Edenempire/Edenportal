<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Compliance CV-7</title>

<link rel="icon" type="image/png" href="logo.png">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=JetBrains+Mono&display=swap" rel="stylesheet">

<style>

/* ===========================
ROOT
=========================== */

:root{

--bg:#000;
--panel:#050505;
--red:#ff0033;
--green:#00ff41;
--text:#ff0033;

--font1:'Orbitron',sans-serif;
--font2:'JetBrains Mono',monospace;

}

/* ===========================
BASE
=========================== */

*{
box-sizing:border-box;
margin:0;
padding:0;
}

body{

background:#000;
color:var(--red);
font-family:var(--font2);
overflow-x:hidden;

}

/* ===========================
HEADER
=========================== */

header{

position:sticky;
top:0;
background:#000;
padding:20px;
text-align:center;
border-bottom:1px solid var(--red);
z-index:1000;

}

header h1{

font-family:var(--font1);
letter-spacing:6px;

}

/* ===========================
MAIN
=========================== */

main{

padding:20px;
max-width:1400px;
margin:auto;

}

/* ===========================
SECTION
=========================== */

.section{

margin-bottom:40px;
border:1px solid #111;
padding:20px;
background:#050505;

}

.section h2{

margin-bottom:15px;
font-family:var(--font1);

}

/* ===========================
PANELS
=========================== */

.panel{

margin-top:15px;

}

/* ===========================
INPUTS
=========================== */

textarea,
input{

width:100%;
background:#000;
border:1px solid #111;
color:var(--green);
padding:10px;
margin-bottom:10px;
font-family:var(--font2);

}

textarea{

min-height:120px;

}

/* ===========================
BUTTONS
=========================== */

button{

padding:10px;
margin-top:5px;
margin-right:5px;
border:none;
cursor:pointer;
font-family:var(--font2);

}

.save{

background:#222;
color:#fff;

}

.send{

background:var(--green);
color:#000;
font-weight:bold;

}

.delete{

background:#500;
color:#fff;

}

/* ===========================
OUTPUT
=========================== */

.output{

margin-top:15px;
padding:10px;
border:1px solid var(--green);
min-height:40px;
color:var(--green);

}

/* ===========================
CHECKLIST
=========================== */

.task{

display:flex;
gap:10px;
margin-bottom:5px;

}

.task input[type=text]{

flex:1;

}

/* ===========================
FOOTER
=========================== */

footer{

padding:30px;
text-align:center;
border-top:1px solid var(--red);
margin-top:50px;

}

/* ===========================
LOADING
=========================== */

.loading{

position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:#000;
display:none;
align-items:center;
justify-content:center;
z-index:9999;

}

.loading.show{

display:flex;

}

.loader{

border:3px solid #111;
border-top:3px solid var(--green);
width:40px;
height:40px;
border-radius:50%;
animation:spin 1s linear infinite;

}

@keyframes spin{

100%{transform:rotate(360deg)}

}

/* ===========================
TOAST
=========================== */

.toast{

position:fixed;
bottom:20px;
right:20px;
background:#000;
border:1px solid var(--green);
padding:10px;
display:none;
color:var(--green);

}

.toast.show{

display:block;

}

/* ===========================
GLITCH BACKGROUND
=========================== */

canvas{

position:fixed;
top:0;
left:0;
z-index:-1;

}

  .task-list{
  margin-top:10px;
}

.task-item{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px;
  margin-bottom:6px;
  background:#020202;
  border:1px solid #111;
  transition:all .3s ease;
  animation:fadeIn .3s ease;
}

.task-item:hover{
  background:#111;
}

.task-text.checked{
  text-decoration:line-through;
  opacity:.6;
}

@keyframes fadeIn{
  from{opacity:0; transform:translateY(-5px);}
  to{opacity:1; transform:translateY(0);}
}

.mini-section{
  margin-top:20px;
}

  @media(max-width:600px){

  .task-item{
    flex-wrap:wrap;
  }

  .task-item button{
    flex:1;
  }

  .task-creator{
    display:flex;
    flex-direction:column;
    gap:10px;
  }

}

  .upload-box{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-bottom:20px;
}

.intel-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(250px,1fr));
  gap:15px;
}

.file-card{
  border:1px solid #111;
  padding:10px;
  background:#020202;
  animation:fadeIn .3s ease;
}

.file-card img,
.file-card video{
  width:100%;
  max-height:200px;
  object-fit:cover;
}

.preview audio{
  width:100%;
}

</style>
</head>
<body>

<canvas id="glitch"></canvas>

<header>

<h1><a href="/index.html" style="text-decoration: none; color: #ff0033;" title="back to home...">COMPLIANCE CV-7</a></h1>

</header>

<div class="loading" id="loading">
<div class="loader"></div>
</div>

<div class="toast" id="toast"></div>

<main>

<!-- SECTION 1 -->

<div class="section">

<h2>SECTION 1 — TARGET</h2>

<textarea id="s1_input">
  Target: money (R5000 into P&P business bank account every end of the month)
  <br>
  Execution: Parables & Platters
  Routes: ends EAST stalwart semelane street... flank endings are NORTH ke masinga and SOUTH harbour... then WEST, the market...
  Rules: deposits are only done @ 320 west street
  Logic: 6 units a day = R150 a day / R100 into Parables & Platters business bank account
  Cooking starts: 04:00am every morning
  -------
  TYPE WHAT YOU NEED TO TYPE BELOW...
  -------
</textarea>

<button class="save" onclick="save(1)">SAVE</button>

<button class="send" onclick="send(1)">SEND</button>

<div class="output" id="s1_output"></div>

</div>

  <!-- SECTION 2 -->

  <div class="section">

<h2>SECTION 2 — CHECKLIST</h2>

<!-- TASK CREATOR -->
<div class="task-creator">
  <input id="taskInput" placeholder="Add a task... cipc, embassies, illegalities, taxi association">
  <button class="save" onclick="addTask()">ADD</button>
</div>

<!-- MINI SECTIONS -->
<div class="mini-section">
  <h3>ACTIVE TASKS</h3>
  <div id="activeTasks" class="task-list"></div>
</div>

<div class="mini-section">
  <h3>COMPLETED TASKS</h3>
  <div id="completedTasks" class="task-list"></div>
</div>

</div>

<!-- SECTION 3 -->

<div class="section">

<h2>SECTION 3 — INTEL LOG</h2>

<div class="upload-box">

  <input type="file" id="fileInput" multiple>
  <textarea id="fileNote" placeholder="Add note for these files..."></textarea>

  <button class="save" onclick="uploadFiles()">UPLOAD (MAX 7)</button>

</div>

<div id="intelLog" class="intel-grid"></div>

</div>

<!-- SECTION 4 -->

<div class="section">

<h2>SECTION 4 — n/a</h2>

<textarea id="s4_input"></textarea>

<button class="save" onclick="save(4)">SAVE</button>

<button class="send" onclick="send(4)">SEND</button>

<div class="output" id="s4_output"></div>

</div>


<!-- SECTION 5 -->

<div class="section">

<h2>SECTION 5 — n/a</h2>

<textarea id="s5_input"></textarea>

<button class="save" onclick="save(5)">SAVE</button>

<button class="send" onclick="send(5)">SEND</button>

<div class="output" id="s5_output"></div>

</div>


<!-- SECTION 6 -->

<div class="section">

<h2>SECTION 6 — n/a</h2>

<textarea id="s6_input"></textarea>

<button class="save" onclick="save(6)">SAVE</button>

<button class="send" onclick="send(6)">SEND</button>

<div class="output" id="s6_output"></div>

</div>


<!-- SECTION 7 -->

<div class="section">

<h2>SECTION 7 — ZAMA MDLULI (AI)</h2>

<input id="ai_input">

<button class="send" onclick="ai()">SEND</button>

<div class="output" id="ai_output"></div>

</div>


</main>

<footer>

"The Lord is my light and my salvation; whom shall I fear?" — Psalm 27:1 KJV

</footer>

  <script>

/* =========================================
   CV7 FULL STATE ENGINE — INFINITE LOOP
========================================= */

const STORAGE_KEY = "CV7_MASTER_DB_V1";

/* ================================
   MASTER DATABASE
================================ */

let DB = loadDB();

/* ================================
   SAFE LOAD
================================ */

function loadDB(){
    try{
        return JSON.parse(localStorage.getItem(STORAGE_KEY)) || createEmptyDB();
    }catch(e){
        console.warn("DB Corrupted. Rebuilding.");
        return createEmptyDB();
    }
}

function createEmptyDB(){
    return {
        sections:{},
        outputs:{},
        tasks:[],
        ai:{input:"",output:""},
        scroll:0,
        version:1,
        lastSaved:Date.now()
    };
}

/* ================================
   GLOBAL PERSIST
================================ */

function persist(){
    DB.lastSaved = Date.now();
    localStorage.setItem(STORAGE_KEY, JSON.stringify(DB));
}

/* ================================
   AUTO SAVE LOOP (EVERY 1 SECOND)
================================ */

setInterval(()=>{
    captureAll();
    persist();
},1000);

/* ================================
   CAPTURE EVERYTHING
================================ */

function captureAll(){

    document.querySelectorAll("textarea").forEach(t=>{
        DB.sections[t.id] = t.value;
    });

    document.querySelectorAll(".output").forEach(o=>{
        DB.outputs[o.id] = o.innerText;
    });

    DB.ai.input = ai_input.value;
    DB.ai.output = ai_output.innerText;

    DB.scroll = window.scrollY;
}

/* ================================
   RESTORE EVERYTHING
================================ */

function restoreAll(){

    Object.keys(DB.sections).forEach(id=>{
        const el = document.getElementById(id);
        if(el) el.value = DB.sections[id];
    });

    Object.keys(DB.outputs).forEach(id=>{
        const el = document.getElementById(id);
        if(el) el.innerText = DB.outputs[id];
    });

    ai_input.value = DB.ai.input || "";
    ai_output.innerText = DB.ai.output || "";

    setTimeout(()=>{
        window.scrollTo(0, DB.scroll || 0);
    },200);
}

/* ================================
   SAVE BUTTON
================================ */

function save(id){
    captureAll();
    persist();
    toast("Saved");
}

/* ================================
   SEND BUTTON
================================ */

function send(id){
    showLoader();
    setTimeout(()=>{
        const input = document.getElementById("s"+id+"_input");
        const output = document.getElementById("s"+id+"_output");
        output.innerText = input.value;
        captureAll();
        persist();
        hideLoader();
        toast("Sent");
    },500);
}

/* ================================
   TASK SYSTEM (FULL PERSIST)
================================ */

let tasks = DB.tasks || [];

function addTask(){
    const value = taskInput.value.trim();
    if(!value) return;

    tasks.unshift({
        id: crypto.randomUUID(),
        text:value,
        completed:false,
        created:Date.now()
    });

    DB.tasks = tasks;
    persist();
    renderTasks();
    taskInput.value="";
}

function renderTasks(){
    activeTasks.innerHTML="";
    completedTasks.innerHTML="";

    tasks.forEach(t=>{
        const el = createTaskElement(t);
        if(t.completed) completedTasks.appendChild(el);
        else activeTasks.appendChild(el);
    });
}

function toggleTask(id){
    const t = tasks.find(x=>x.id===id);
    t.completed=!t.completed;
    DB.tasks=tasks;
    persist();
    renderTasks();
}

function deleteTask(id){
    tasks = tasks.filter(t=>t.id!==id);
    DB.tasks=tasks;
    persist();
    renderTasks();
}

function editTask(id){
    const t = tasks.find(x=>x.id===id);
    const txt = prompt("Edit:",t.text);
    if(txt===null) return;
    t.text = txt.trim();
    DB.tasks=tasks;
    persist();
    renderTasks();
}

function createTaskElement(task){
    const div=document.createElement("div");
    div.className="task-item";
    div.innerHTML=`
        <input type="checkbox" ${task.completed?"checked":""}
            onchange="toggleTask('${task.id}')">
        <span class="task-text ${task.completed?"checked":""}">
            ${task.text}
        </span>
        <button onclick="editTask('${task.id}')">✎</button>
        <button onclick="deleteTask('${task.id}')" class="delete">X</button>
    `;
    return div;
}

/* ================================
   AI PERSISTENT
================================ */

function ai(){
    const cmd = ai_input.value;
    let res = "UNKNOWN";

    if(cmd.toLowerCase().includes("status"))
        res="ALL SYSTEMS READY";

    ai_output.innerText=res;
    captureAll();
    persist();
}

/* ================================
   TOAST
================================ */

function toast(msg){
    const t=document.getElementById("toast");
    t.innerText=msg;
    t.classList.add("show");
    setTimeout(()=>t.classList.remove("show"),2000);
}

/* ================================
   LOADER
================================ */

function showLoader(){
    loading.classList.add("show");
}
function hideLoader(){
    loading.classList.remove("show");
}

/* ================================
   INIT
================================ */

window.onload=()=>{
    restoreAll();
    renderTasks();
    glitch();
};

/* ================================
   GLITCH LOOP
================================ */

let c=document.getElementById("glitch");
let ctx=c.getContext("2d");

function resize(){
    c.width=innerWidth;
    c.height=innerHeight;
}
resize();
window.onresize=resize;

function glitch(){
    ctx.clearRect(0,0,c.width,c.height);
    for(let i=0;i<5;i++){
        ctx.fillStyle="#003300";
        ctx.fillRect(
            Math.random()*c.width,
            Math.random()*c.height,
            Math.random()*2,
            Math.random()*40
        );
    }
    requestAnimationFrame(glitch);
}

</script>

</body>
</html>
















