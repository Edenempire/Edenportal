<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Compliance CV-7</title>

<link rel="icon" type="image/png" href="logo.png">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=JetBrains+Mono&display=swap" rel="stylesheet">

<style>

/* ===========================
ROOT
=========================== */

:root{

--bg:#000;
--panel:#050505;
--red:#ff0033;
--green:#00ff41;
--text:#ff0033;

--font1:'Orbitron',sans-serif;
--font2:'JetBrains Mono',monospace;

}

/* ===========================
BASE
=========================== */

*{
box-sizing:border-box;
margin:0;
padding:0;
}

body{

background:#000;
color:var(--red);
font-family:var(--font2);
overflow-x:hidden;

}

/* ===========================
HEADER
=========================== */

header{

position:sticky;
top:0;
background:#000;
padding:20px;
text-align:center;
border-bottom:1px solid var(--red);
z-index:1000;

}

header h1{

font-family:var(--font1);
letter-spacing:6px;

}

/* ===========================
MAIN
=========================== */

main{

padding:20px;
max-width:1400px;
margin:auto;

}

/* ===========================
SECTION
=========================== */

.section{

margin-bottom:40px;
border:1px solid #111;
padding:20px;
background:#050505;

}

.section h2{

margin-bottom:15px;
font-family:var(--font1);

}

/* ===========================
PANELS
=========================== */

.panel{

margin-top:15px;

}

/* ===========================
INPUTS
=========================== */

textarea,
input{

width:100%;
background:#000;
border:1px solid #111;
color:var(--green);
padding:10px;
margin-bottom:10px;
font-family:var(--font2);

}

textarea{

min-height:120px;

}

/* ===========================
BUTTONS
=========================== */

button{

padding:10px;
margin-top:5px;
margin-right:5px;
border:none;
cursor:pointer;
font-family:var(--font2);

}

.save{

background:#222;
color:#fff;

}

.send{

background:var(--green);
color:#000;
font-weight:bold;

}

.delete{

background:#500;
color:#fff;

}

/* ===========================
OUTPUT
=========================== */

.output{

margin-top:15px;
padding:10px;
border:1px solid var(--green);
min-height:40px;
color:var(--green);

}

/* ===========================
CHECKLIST
=========================== */

.task{

display:flex;
gap:10px;
margin-bottom:5px;

}

.task input[type=text]{

flex:1;

}

/* ===========================
FOOTER
=========================== */

footer{

padding:30px;
text-align:center;
border-top:1px solid var(--red);
margin-top:50px;

}

/* ===========================
LOADING
=========================== */

.loading{

position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:#000;
display:none;
align-items:center;
justify-content:center;
z-index:9999;

}

.loading.show{

display:flex;

}

.loader{

border:3px solid #111;
border-top:3px solid var(--green);
width:40px;
height:40px;
border-radius:50%;
animation:spin 1s linear infinite;

}

@keyframes spin{

100%{transform:rotate(360deg)}

}

/* ===========================
TOAST
=========================== */

.toast{

position:fixed;
bottom:20px;
right:20px;
background:#000;
border:1px solid var(--green);
padding:10px;
display:none;
color:var(--green);

}

.toast.show{

display:block;

}

/* ===========================
GLITCH BACKGROUND
=========================== */

canvas{

position:fixed;
top:0;
left:0;
z-index:-1;

}

  .task-list{
  margin-top:10px;
}

.task-item{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px;
  margin-bottom:6px;
  background:#020202;
  border:1px solid #111;
  transition:all .3s ease;
  animation:fadeIn .3s ease;
}

.task-item:hover{
  background:#111;
}

.task-text.checked{
  text-decoration:line-through;
  opacity:.6;
}

@keyframes fadeIn{
  from{opacity:0; transform:translateY(-5px);}
  to{opacity:1; transform:translateY(0);}
}

.mini-section{
  margin-top:20px;
}

  @media(max-width:600px){

  .task-item{
    flex-wrap:wrap;
  }

  .task-item button{
    flex:1;
  }

  .task-creator{
    display:flex;
    flex-direction:column;
    gap:10px;
  }

}

  .upload-box{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-bottom:20px;
}

.intel-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(250px,1fr));
  gap:15px;
}

.file-card{
  border:1px solid #111;
  padding:10px;
  background:#020202;
  animation:fadeIn .3s ease;
}

.file-card img,
.file-card video{
  width:100%;
  max-height:200px;
  object-fit:cover;
}

.preview audio{
  width:100%;
}

</style>
</head>
<body>

<canvas id="glitch"></canvas>

<header>

<h1><a href="/index.html" style="text-decoration: none; color: #ff0033;" title="back to home...">COMPLIANCE CV-7</a></h1>

</header>

<div class="loading" id="loading">
<div class="loader"></div>
</div>

<div class="toast" id="toast"></div>

<main>

<!-- SECTION 1 -->

<div class="section">

<h2>SECTION 1 — TARGET</h2>

<textarea id="s1_input">
  Target: money (R5000 into P&P business bank account every end of the month)
  Execution: Parables & Platters
  Routes: ends EAST stalwart semelane street... flank endings are NORTH ke masinga and SOUTH harbour... then WEST, the market...
  Rules: deposits are only done @ 320 west street
  Logic: 6 units a day = R150 a day / R100 into Parables & Platters business bank account
  Cooking starts: 04:00am every morning
  -------
  TYPE WHAT YOU NEED TO TYPE BELOW...
  -------
</textarea>

<button class="save" onclick="save(1)">SAVE</button>

<button class="send" onclick="send(1)">SEND</button>

<div class="output" id="s1_output"></div>

</div>

  <!-- SECTION 2 -->

  <div class="section">

<h2>SECTION 2 — CHECKLIST</h2>

<!-- TASK CREATOR -->
<div class="task-creator">
  <input id="taskInput" placeholder="Add a task... cipc, embassies, illegalities, taxi association">
  <button class="save" onclick="addTask()">ADD</button>
</div>

<!-- MINI SECTIONS -->
<div class="mini-section">
  <h3>ACTIVE TASKS</h3>
  <div id="activeTasks" class="task-list"></div>
</div>

<div class="mini-section">
  <h3>COMPLETED TASKS</h3>
  <div id="completedTasks" class="task-list"></div>
</div>

</div>

<!-- SECTION 3 -->

<div class="section">

<h2>SECTION 3 — INTEL LOG</h2>

<div class="upload-box">

  <input type="file" id="fileInput" multiple>
  <textarea id="fileNote" placeholder="Add note for these files..."></textarea>

  <button class="save" onclick="uploadFiles()">UPLOAD (MAX 7)</button>

</div>

<div id="intelLog" class="intel-grid"></div>

</div>

<!-- SECTION 4 -->

<div class="section">

<h2>SECTION 4 — n/a</h2>

<textarea id="s4_input"></textarea>

<button class="save" onclick="save(4)">SAVE</button>

<button class="send" onclick="send(4)">SEND</button>

<div class="output" id="s4_output"></div>

</div>


<!-- SECTION 5 -->

<div class="section">

<h2>SECTION 5 — n/a</h2>

<textarea id="s5_input"></textarea>

<button class="save" onclick="save(5)">SAVE</button>

<button class="send" onclick="send(5)">SEND</button>

<div class="output" id="s5_output"></div>

</div>


<!-- SECTION 6 -->

<div class="section">

<h2>SECTION 6 — n/a</h2>

<textarea id="s6_input"></textarea>

<button class="save" onclick="save(6)">SAVE</button>

<button class="send" onclick="send(6)">SEND</button>

<div class="output" id="s6_output"></div>

</div>


<!-- SECTION 7 -->

<div class="section">

<h2>SECTION 7 — ZAMA MDLULI (AI)</h2>

<input id="ai_input">

<button class="send" onclick="ai()">SEND</button>

<div class="output" id="ai_output"></div>

</div>


</main>

<footer>

"The Lord is my light and my salvation; whom shall I fear?" — Psalm 27:1 KJV

</footer>


<script>

/* ===========================
DATABASE
=========================== */

let DB = JSON.parse(localStorage.DB || "{}");

/* ===========================
SAVE
=========================== */

function save(id){

DB["s"+id] = document.getElementById("s"+id+"_input").value;

persist();

toast("Saved");

}

/* ===========================
SEND
=========================== */

function send(id){

load(true);

setTimeout(()=>{

DB["s"+id+"_output"] = DB["s"+id];

persist();

document.getElementById("s"+id+"_output").innerText = DB["s"+id];

load(false);

toast("Sent");

},800);

}

  /* SECTION 3 */

  let db;

const request = indexedDB.open("CV7_INTEL_DB", 1);

request.onupgradeneeded = e => {
  db = e.target.result;
  db.createObjectStore("files", { keyPath: "id" });
};

request.onsuccess = e => {
  db = e.target.result;
  loadFiles();
};

  function uploadFiles(){

  const files = fileInput.files;
  if(!files.length) return;

  if(files.length > 7){
    alert("Max 7 files at once.");
    return;
  }

  showLoader();

  const tx = db.transaction("files", "readwrite");
  const store = tx.objectStore("files");

  Array.from(files).forEach(file => {

    const reader = new FileReader();

    reader.onload = function(){

      const entry = {
        id: crypto.randomUUID(),
        name: file.name,
        type: file.type,
        size: file.size,
        data: reader.result,
        note: fileNote.value,
        created: Date.now()
      };

      store.add(entry);
    };

    reader.readAsDataURL(file);
  });

  tx.oncomplete = () => {
    fileInput.value = "";
    fileNote.value = "";
    hideLoader();
    loadFiles();
    toast("Files Uploaded");
  };

}

  function loadFiles(){

  intelLog.innerHTML = "";

  const tx = db.transaction("files", "readonly");
  const store = tx.objectStore("files");
  const request = store.getAll();

  request.onsuccess = () => {

    const files = request.result.sort((a,b)=>b.created-a.created);

    files.forEach(file => {
      intelLog.appendChild(createFileCard(file));
    });

  };
}

  function createFileCard(file){

  const div = document.createElement("div");
  div.className = "file-card";

  let preview = "";

  if(file.type.startsWith("image")){
    preview = `<img src="${file.data}">`;
  }
  else if(file.type.startsWith("video")){
    preview = `<video controls src="${file.data}"></video>`;
  }
  else if(file.type.startsWith("audio")){
    preview = `<audio controls src="${file.data}"></audio>`;
  }
  else{
    preview = `<a href="${file.data}" download="${file.name}">
                 DOWNLOAD FILE
               </a>`;
  }

  div.innerHTML = `
    <h4>${file.name}</h4>
    <div class="preview">${preview}</div>
    <p class="note">${file.note || ""}</p>
    <button onclick="deleteFile('${file.id}')" class="delete">DELETE</button>
  `;

  return div;
}

  function deleteFile(id){

  showLoader();

  const tx = db.transaction("files", "readwrite");
  const store = tx.objectStore("files");

  store.delete(id);

  tx.oncomplete = ()=>{
    hideLoader();
    loadFiles();
    toast("Deleted");
  };
}

/* ===========================
TASKS CRUD
=========================== */

let tasks = DB.tasks || [];

function persist(){
  DB.tasks = tasks;
  localStorage.DB = JSON.stringify(DB);
}

/* ======================
ADD TASK
====================== */

function addTask(){

  const value = taskInput.value.trim();
  if(!value) return;

  showLoader();

  setTimeout(()=>{

    tasks.unshift({
      id: crypto.randomUUID(),
      text: value,
      completed: false,
      created: Date.now()
    });

    persist();
    renderTasks();
    taskInput.value = "";
    hideLoader();
    toast("Task Added");

  },300);
}

/* ======================
RENDER
====================== */

function renderTasks(){

  activeTasks.innerHTML = "";
  completedTasks.innerHTML = "";

  const active = tasks.filter(t=>!t.completed);
  const done = tasks.filter(t=>t.completed);

  active.forEach(t=>activeTasks.appendChild(createTaskElement(t)));
  done.forEach(t=>completedTasks.appendChild(createTaskElement(t)));

}

/* ======================
CREATE TASK NODE
====================== */

function createTaskElement(task){

  const div = document.createElement("div");
  div.className = "task-item";
  div.dataset.id = task.id;

  div.innerHTML = `
    <input type="checkbox"
      ${task.completed ? "checked" : ""}
      onchange="toggleTask('${task.id}')">

    <span class="task-text ${task.completed ? "checked" : ""}">
      ${task.text}
    </span>

    <button onclick="editTask('${task.id}')">✎</button>
    <button onclick="deleteTask('${task.id}')" class="delete">X</button>
  `;

  return div;
}

/* ======================
TOGGLE
====================== */

function toggleTask(id){

  showLoader();

  setTimeout(()=>{

    const task = tasks.find(t=>t.id===id);
    task.completed = !task.completed;

    persist();
    animateMove(id);
    renderTasks();
    hideLoader();

  },250);
}

/* ======================
DELETE
====================== */

function deleteTask(id){

  showLoader();

  setTimeout(()=>{

    tasks = tasks.filter(t=>t.id!==id);
    persist();
    renderTasks();
    hideLoader();
    toast("Deleted");

  },250);
}

/* ======================
EDIT
====================== */

function editTask(id){

  const task = tasks.find(t=>t.id===id);
  const newText = prompt("Edit task:", task.text);
  if(newText === null) return;

  task.text = newText.trim();
  persist();
  renderTasks();
}

/* ===========================
AI
=========================== */

function ai(){

let cmd=ai_input.value;

let res="UNKNOWN";

if(cmd.includes("status")) res="ALL SYSTEMS READY";

ai_output.innerText=res;

}

/* ===========================
AUTO SAVE
=========================== */

setInterval(()=>{

document.querySelectorAll("textarea").forEach((t,i)=>{

DB["s"+(i+1)] = t.value;

});

persist();

},2000);

/* ===========================
LOAD
=========================== */

function load(show){

loading.classList.toggle("show",show);

}

/* ===========================
PERSIST
=========================== */

function persist(){

DB.tasks=tasks;

localStorage.DB = JSON.stringify(DB);

}

/* ===========================
TOAST
=========================== */

function toast(msg){

toast.innerText=msg;

toast.classList.add("show");

setTimeout(()=>toast.classList.remove("show"),2000);

}

/* ===========================
INIT
=========================== */

  function init(){

  tasks = DB.tasks || [];
  renderTasks();

}

/* ===========================
GLITCH
=========================== */

let c=document.getElementById("glitch");
let ctx=c.getContext("2d");

function resize(){

c.width=innerWidth;
c.height=innerHeight;

}

resize();

window.onresize=resize;

function glitch(){

ctx.clearRect(0,0,c.width,c.height);

for(let i=0;i<5;i++){

ctx.fillStyle="#003300";

ctx.fillRect(

Math.random()*c.width,
Math.random()*c.height,
Math.random()*2,
Math.random()*40

);

}

requestAnimationFrame(glitch);

}

glitch();

  function animateMove(id){
  const el = document.querySelector(`[data-id="${id}"]`);
  if(!el) return;

  el.style.transform = "scale(.95)";
  setTimeout(()=>{
    el.style.transform = "scale(1)";
  },150);
}

  function showLoader(){
  loading.classList.add("show");
}

function hideLoader(){
  loading.classList.remove("show");
}

</script>

</body>
</html>














